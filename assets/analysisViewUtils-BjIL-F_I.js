import{e as n,y as o,a as d,g as r,w as c,fq as w,r as y,a_ as f,gv as p}from"./index-ZXy_8vtR.js";import{l as $}from"./InteractiveToolBase-BITX4vRC.js";let l=class extends ${constructor(a){super(a)}initialize(){this.addHandles(r(()=>this.analysisViewData.visible,a=>this.visible=a,c))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};n([o({constructOnly:!0})],l.prototype,"analysis",void 0),n([o()],l.prototype,"analysisViewData",void 0),l=n([d("esri.views.interactive.AnalysisToolBase")],l);function V(t,a){t.interactive=!0;const{tool:e,view:s}=t;s.activeTool=e;let i=w(a,()=>{s.activeTool===e&&(s.activeTool=null)});return y(async u=>{await f(()=>e==null||!e.active,u),i=p(i)},a)}function g(t,a){return r(()=>t.interactive,()=>h(t,a),c)}function h(t,a){t.interactive?m(t,a):v(t)}function m(t,a){v(t);const{view:e,analysis:s}=t,i=new a({view:e,analysis:s,analysisViewData:t});return t.tool=i,e.tools.add(i),i}function v(t){const{view:a,tool:e}=t;e!=null&&(a.tools.remove(e),t.tool=null)}export{l as a,g as b,V as l,v};
