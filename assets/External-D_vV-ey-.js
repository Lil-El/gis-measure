import{bv as N,a$ as y,bw as A,bx as u,by as c}from"./index-BZRBOKU4.js";class b{constructor(e,r,t){this.assetName=e,this.assetMimeType=r,this.parts=t}equals(e){return this===e||this.assetName===e.assetName&&this.assetMimeType===e.assetMimeType&&A(this.parts,e.parts,(r,t)=>r.equals(t))}isOnService(e){return this.parts.every(r=>r.isOnService(e))}makeHash(){let e="";for(const r of this.parts)e+=r.partHash;return e}async toBlob(e){const{parts:r}=this;if(r.length===1)return r[0].toBlob(e);const t=await Promise.all(r.map(n=>n.toBlob(e)));return y(e),new Blob(t)}}class B{constructor(e,r){this.partUrl=e,this.partHash=r}equals(e){return this===e||this.partUrl===e.partUrl&&this.partHash===e.partHash}isOnService(e){return this.partUrl.startsWith(`${e.path}/assets/`)}async toBlob(e){const{data:r}=await N(this.partUrl,{responseType:"blob"});return y(e),r}}function H(s){return v(s==null?void 0:s.source)}function f(s){return Array.isArray(s)?s.every(e=>e instanceof b):!1}const l=/^(model\/gltf\+json)|(model\/gltf-binary)$/,h=/\.(gltf|glb)/i;function v(s){return s?Array.isArray(s)?s.some(p):p(s):!1}function p(s){if(s instanceof File){const{type:e,name:r}=s;return l.test(e)||h.test(r)}return l.test(s.assetMimeType)||h.test(s.assetName)}function M(s,e){if(!s)return!1;const{source:r}=s;return $(r,e)}function U(s,e){if(s===e)return!0;const{source:r}=s,{source:t}=e;if(r===t)return!0;if(f(r)&&f(t)){if(r.length!==t.length)return!1;const n=(a,o)=>a.assetName<o.assetName?-1:a.assetName>o.assetName?1:0,i=[...r].sort(n),g=[...t].sort(n);for(let a=0;a<i.length;++a)if(!i[a].equals(g[a]))return!1;return!0}return!1}function $(s,e){return Array.isArray(s)?s.every(r=>m(r,e)):m(s,e)}function m(s,e){return s instanceof b&&s.isOnService(e)}function q(s,e){return s instanceof File?u(s.name,e)??c(s.type,e):c(s.assetMimeType,e)??u(s.assetName,e)}function w(s){return Array.isArray(s)?s:[s]}function O(s){return!!s.original}export{O as A,w as N,b as a,q as g,U as h,B as i,M as m,H as o};
